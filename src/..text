
import React, { useState} from 'react'
import axios from 'axios'

function sample() {
  const [name, setName] = useState("");
  const[contacts, setContacts] = useState([]);
  const handleSubmit = (e) => { 
    axios.post("http://localhost:3000/Contact", {name})
    e.preventDefault();
    setContacts([...contacts, {name}]);
    setName("");
    
    
  }
  const handleDelete = (index) => {
    axios.delete(`http://localhost:3000/Contact/${index}`)
    setContacts(contacts.filter((_, i) => i !== index));
  }

  const handleUpdate = (index) => {
    const contact = contacts[index];
    setName(contact.name);
    axios.put(`http://localhost:3000/Contact/${index}`, {name})
    setContacts(contacts.map((contact, i) => i === index ? { name } : contact));
  }

  return (
    <div>
      <form onSubmit={handleSubmit}>
        <label>
        <input type="text" value={name} onChange={(e) => setName(e.target.value)} />
        <button type="submit">Submit</button>
      </label>
      </form>
      <ul>
        {contacts.map((contact, index) => (
          <li key={index}>
            {contact.name}
            <button onClick={() => handleUpdate(index)}>Update</button>
            <button onClick={() => handleDelete(index)}>Delete</button>
          </li>
        ))}
      </ul>
      
    </div>
  )

}

export default sample

